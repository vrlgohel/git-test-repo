<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:camel="http://camel.apache.org/schema/blueprint"
           xmlns:camelcxf="http://camel.apache.org/schema/blueprint/cxf"
           xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">
    <camelcxf:cxfEndpoint address="http://localhost:9000/cxf/person"
                          endpointName="person:soap" id="proxyEndpoint"
                          serviceClass="org.apache.servicemix.samples.wsdl_first.Person"
                          serviceName="person:PersonService" wsdlURL="META-INF/wsdl/person.wsdl"
                          xmlns:person="http://servicemix.apache.org/samples/wsdl-first">
        <camelcxf:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </camelcxf:inInterceptors>
        <camelcxf:outInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </camelcxf:outInterceptors>
    </camelcxf:cxfEndpoint>
    <camelcxf:cxfEndpoint address="http://localhost:8092/PersonService/"
                          endpointName="person:soap" id="invokerEndpoint"
                          serviceClass="org.apache.servicemix.samples.wsdl_first.Person"
                          serviceName="person:PersonService" wsdlURL="META-INF/wsdl/person.wsdl"
                          xmlns:person="http://servicemix.apache.org/samples/wsdl-first">
        <camelcxf:inInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingInInterceptor"/>
        </camelcxf:inInterceptors>
        <camelcxf:outInterceptors>
            <bean class="org.apache.cxf.interceptor.LoggingOutInterceptor"/>
        </camelcxf:outInterceptors>
    </camelcxf:cxfEndpoint>
    <http-conf:conduit name="http://localhost:8092/.*">
        <http-conf:client AllowChunking="true" Connection="Keep-Alive"
                          MaxRetransmits="1"/>
    </http-conf:conduit>
    <bean class="org.apache.camel.impl.DefaultShutdownStrategy" id="shutdown">
        <property name="timeout" value="30"/>
    </bean>
    <camelContext id="camel"
                  xmlns="http://camel.apache.org/schema/blueprint">
        <route id="_route1">
            <from id="_from1" uri="cxf:bean:proxyEndpoint"/>
            <to id="_to1" uri="cxf:bean:invokerEndpoint"/>
        </route>
    </camelContext>
</blueprint>
